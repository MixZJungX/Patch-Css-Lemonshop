<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏¥‡∏ß</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-case { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        input { padding: 8px; margin: 5px; width: 200px; }
        .result { margin-top: 10px; padding: 10px; background: #f8f9fa; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>üîç ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏¥‡∏ß</h1>
    
    <div class="test-case">
        <h3>Test Case 1: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "14y 2y" (‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á)</h3>
        <input type="text" id="search1" value="14y 2y" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
        <button onclick="testSearch('search1')">‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        <div id="result1" class="result"></div>
    </div>
    
    <div class="test-case">
        <h3>Test Case 2: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "14y_2y" (‡∏°‡∏µ underscore)</h3>
        <input type="text" id="search2" value="14y_2y" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
        <button onclick="testSearch('search2')">‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        <div id="result2" class="result"></div>
    </div>
    
    <div class="test-case">
        <h3>Test Case 3: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£ "0661282287"</h3>
        <input type="text" id="search3" value="0661282287" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
        <button onclick="testSearch('search3')">‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        <div id="result3" class="result"></div>
    </div>
    
    <div class="test-case">
        <h3>Test Case 4: ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏Ñ‡∏¥‡∏ß "476"</h3>
        <input type="text" id="search4" value="476" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...">
        <button onclick="testSearch('search4')">‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        <div id="result4" class="result"></div>
    </div>

    <script>
        // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
        function normalizeSearchTerm(searchTerm) {
            const normalizedSearchTerm = searchTerm.trim();
            const searchLower = normalizedSearchTerm.toLowerCase();
            
            const searchVariants = [
                searchLower,
                searchLower.replace(/\s+/g, '_'),  // ‡πÅ‡∏õ‡∏•‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô underscore
                searchLower.replace(/_/g, ' '),    // ‡πÅ‡∏õ‡∏•‡∏á underscore ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á
            ].filter((variant, index, self) => self.indexOf(variant) === index); // ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≥
            
            return { searchLower, searchVariants };
        }
        
        function testSearch(inputId) {
            const searchTerm = document.getElementById(inputId).value;
            const resultDiv = document.getElementById(inputId.replace('search', 'result'));
            
            resultDiv.innerHTML = '<p>üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö...</p>';
            
            // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
            setTimeout(() => {
                const { searchLower, searchVariants } = normalizeSearchTerm(searchTerm);
                
                let resultHtml = `
                    <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö:</h4>
                    <p><strong>‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏î‡∏¥‡∏°:</strong> "${searchTerm}"</p>
                    <p><strong>‡∏Ñ‡∏≥‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏•‡πâ‡∏ß:</strong> "${searchLower}"</p>
                    <p><strong>‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤:</strong> [${searchVariants.map(v => `"${v}"`).join(', ')}]</p>
                `;
                
                // ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
                if (searchTerm.includes('14y') || searchTerm.includes('476') || searchTerm.includes('0661282287')) {
                    resultHtml += '<p class="success">‚úÖ <strong>‡∏Ñ‡∏ß‡∏£‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</strong> - ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á</p>';
                } else {
                    resultHtml += '<p class="error">‚ùå <strong>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</strong> - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á</p>';
                }
                
                resultDiv.innerHTML = resultHtml;
                resultDiv.parentElement.className = resultDiv.parentElement.className.replace(' error', '').replace(' success', '');
                
                if (searchTerm.includes('14y') || searchTerm.includes('476') || searchTerm.includes('0661282287')) {
                    resultDiv.parentElement.className += ' success';
                } else {
                    resultDiv.parentElement.className += ' error';
                }
            }, 1000);
        }
        
        // ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
        window.onload = function() {
            setTimeout(() => {
                testSearch('search1');
                testSearch('search2');
                testSearch('search3');
                testSearch('search4');
            }, 500);
        };
    </script>
</body>
</html>
